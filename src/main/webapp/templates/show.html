<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title th:text="${title}">Add your page!</title>
    <link href="./templates/css/demo.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="./templates/js/jquery.ffform.js" type="text/javascript"></script>
</head>
<body>
<section id="getintouch" class="flipInX animated">
    <div class="container" style="border-bottom: 0;">
        <h1>
            <span th:text="${title}">Add your page!</span>
        </h1>
    </div>
    <div class="container">
        <form class="contact" action="/page" method="post" id="form">
            <div class="row clearfix">
                <div class="lbl">
                    <label for="title">
                        Title</label>
                    <input type="hidden" th:value="${search_text}" id="hidden_input"/>
                </div>
                <div class="ctrl">
                    <input readonly type="text" th:value="${title}" id="title" name="title" data-required="true"
                           data-validation="text"
                           data-msg="Invalid Name" placeholder="Your page title">
                </div>
            </div>
            <!--<div class="row clearfix">-->
            <!--<div class="lbl">-->
            <!--<label for="text">-->
            <!--Text</label>-->
            <!--</div>-->
            <!--<div class="ctrl">-->
            <!--<textarea readonly id="text" th:text="${page}" name="text" rows="40" cols="10"-->
            <!--placeholder="Your page text"></textarea>-->
            <!--</div>-->
            <!--</div>-->
            <div class="row clearfix">
                <div class="lbl">
                    <label for="text">
                        Text</label>
                </div>
                <div class="ctrl">
                    <h2>
                        <span id="page_input" style="text-align: left" th:text="${page}">Add your page!</span>
                    </h2>
                </div>
            </div>
        </form>
    </div>
    </div>
</section>
</body>
<script type="text/javascript">
    var Highlight = {
        arr: [],
        init: function (ops) {
            this.arr[ops.id] = {
                id: ops.id,
                arr: ops.arr
            }
            this.show(this.arr[ops.id]);
        },
        show: function (obj) {
            obj.html = document.getElementById(obj.id).innerHTML;
            for (var i = 0; i < obj.arr.length; i++) {
                // 全局匹配 替换
                console.log( " "+obj.arr[i])
                var reg = new RegExp((obj.arr[i]), 'g');
                obj.html = obj.html.replace(reg, "<span style='color: red'>" + obj.arr[i] + "</span>");
            }
            document.getElementById(obj.id).innerHTML = obj.html;
        }
    }

    $(document).ready(function () {
        var input = $("#hidden_input").val()
        var arrays = input.split(" ")
        Highlight.init({id: "page_input", arr: arrays});

    });
</script>
</html>
